<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Fiscal Data Package | Data Package (v1)</title>
    <meta name="generator" content="VuePress 1.8.2">
    <script src="https://plausible.io/js/script.js" data-domain="specs.frictionlessdata.io"></script>
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.9f416b8c.css" as="style"><link rel="preload" href="/assets/js/app.cdcba9d5.js" as="script"><link rel="preload" href="/assets/js/2.68c57eec.js" as="script"><link rel="preload" href="/assets/js/5.97b64592.js" as="script"><link rel="preload" href="/assets/js/21.a2d11985.js" as="script"><link rel="preload" href="/assets/js/10.b5019115.js" as="script"><link rel="preload" href="/assets/js/3.edca0309.js" as="script"><link rel="prefetch" href="/assets/js/11.95cc6fa2.js"><link rel="prefetch" href="/assets/js/12.a5d52534.js"><link rel="prefetch" href="/assets/js/13.6dbcfbbf.js"><link rel="prefetch" href="/assets/js/14.f42dbdd7.js"><link rel="prefetch" href="/assets/js/15.d2a10675.js"><link rel="prefetch" href="/assets/js/16.f9073eb5.js"><link rel="prefetch" href="/assets/js/17.4427245e.js"><link rel="prefetch" href="/assets/js/18.883bd96b.js"><link rel="prefetch" href="/assets/js/19.d2bc565d.js"><link rel="prefetch" href="/assets/js/20.6842625d.js"><link rel="prefetch" href="/assets/js/22.42c47b43.js"><link rel="prefetch" href="/assets/js/23.8e9ba058.js"><link rel="prefetch" href="/assets/js/24.6284b3d2.js"><link rel="prefetch" href="/assets/js/25.ef9b4db4.js"><link rel="prefetch" href="/assets/js/26.de4a12c5.js"><link rel="prefetch" href="/assets/js/27.c781ab80.js"><link rel="prefetch" href="/assets/js/28.543e073f.js"><link rel="prefetch" href="/assets/js/29.34d52523.js"><link rel="prefetch" href="/assets/js/30.7701f85a.js"><link rel="prefetch" href="/assets/js/31.a9c2f2c7.js"><link rel="prefetch" href="/assets/js/32.0857a49b.js"><link rel="prefetch" href="/assets/js/4.5f18f09e.js"><link rel="prefetch" href="/assets/js/6.03bd64c7.js"><link rel="prefetch" href="/assets/js/7.323437e3.js"><link rel="prefetch" href="/assets/js/8.ad8a6967.js"><link rel="prefetch" href="/assets/js/9.2e4ee646.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9f416b8c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo-light.svg" alt="Data Package (v1)" class="logo"> <span class="site-name can-hide">Data Package (v1)</span></a> <div class="links"><nav class="nav-links can-hide"><div class="nav-item"><a href="/table-schema/" class="nav-link">
  Table Schema
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Data Resource" class="dropdown-title"><span class="title">Data Resource</span> <span class="arrow down"></span></button> <button type="button" aria-label="Data Resource" class="mobile-dropdown-title"><span class="title">Data Resource</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/data-resource/" class="nav-link">
  Data Resource
</a></li><li class="dropdown-item"><!----> <a href="/tabular-data-resource/" class="nav-link">
  Tabular Data Resource
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Data Package" class="dropdown-title"><span class="title">Data Package</span> <span class="arrow down"></span></button> <button type="button" aria-label="Data Package" class="mobile-dropdown-title"><span class="title">Data Package</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/data-package/" class="nav-link">
  Data Package
</a></li><li class="dropdown-item"><!----> <a href="/tabular-data-package/" class="nav-link">
  Tabular Data Package
</a></li><li class="dropdown-item"><!----> <a href="/fiscal-data-package/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Fiscal Data Package
</a></li><li class="dropdown-item"><!----> <a href="/fiscal-data-package--budgets/" class="nav-link">
  Fiscal Data Package - Budgets
</a></li><li class="dropdown-item"><!----> <a href="/fiscal-data-package--spending/" class="nav-link">
  Fiscal Data Package - Spending
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Other Specs" class="dropdown-title"><span class="title">Other Specs</span> <span class="arrow down"></span></button> <button type="button" aria-label="Other Specs" class="mobile-dropdown-title"><span class="title">Other Specs</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/data-package-identifier/" class="nav-link">
  Data Package Identifier
</a></li><li class="dropdown-item"><!----> <a href="/tabular-diff/" class="nav-link">
  Tabular Diff Format
</a></li><li class="dropdown-item"><!----> <a href="/csv-dialect/" class="nav-link">
  CSV Dialect
</a></li><li class="dropdown-item"><!----> <a href="/security/" class="nav-link">
  Security
</a></li><li class="dropdown-item"><!----> <a href="/profiles/" class="nav-link">
  Profiles
</a></li><li class="dropdown-item"><!----> <a href="/views/" class="nav-link">
  Views
</a></li></ul></div></div><div class="nav-item"><a href="/patterns/" class="nav-link">
  Patterns
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Guides" class="dropdown-title"><span class="title">Guides</span> <span class="arrow down"></span></button> <button type="button" aria-label="Guides" class="mobile-dropdown-title"><span class="title">Guides</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guides/data-package/" class="nav-link">
  Data Package
</a></li><li class="dropdown-item"><!----> <a href="/guides/implementation/" class="nav-link">
  Implementation
</a></li></ul></div></div><div class="nav-item"><a href="https://datapackage.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Data Package (v2)
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav> <div class="search-box md:pl-4"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <a href="https://discordapp.com/invite/Sewv6av" title="Discord" target="blank" class="navbaricon"><img src="/img/discord-icon.svg" class="px-2 w-5 pt-4"></a> <a href="https://twitter.com/frictionlessd8a" title="Twitter" target="blank" class="navbaricon"><img src="/img/twitter-icon.svg" class="px-2 w-5 pt-4"></a> <a href="https://github.com/frictionlessdata/specs" title="GitHub" target="blank" class="navbaricon"><img src="/img/github-icon.svg" class="px-2 w-5 pt-4"></a></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/table-schema/" class="nav-link">
  Table Schema
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Data Resource" class="dropdown-title"><span class="title">Data Resource</span> <span class="arrow down"></span></button> <button type="button" aria-label="Data Resource" class="mobile-dropdown-title"><span class="title">Data Resource</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/data-resource/" class="nav-link">
  Data Resource
</a></li><li class="dropdown-item"><!----> <a href="/tabular-data-resource/" class="nav-link">
  Tabular Data Resource
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Data Package" class="dropdown-title"><span class="title">Data Package</span> <span class="arrow down"></span></button> <button type="button" aria-label="Data Package" class="mobile-dropdown-title"><span class="title">Data Package</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/data-package/" class="nav-link">
  Data Package
</a></li><li class="dropdown-item"><!----> <a href="/tabular-data-package/" class="nav-link">
  Tabular Data Package
</a></li><li class="dropdown-item"><!----> <a href="/fiscal-data-package/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Fiscal Data Package
</a></li><li class="dropdown-item"><!----> <a href="/fiscal-data-package--budgets/" class="nav-link">
  Fiscal Data Package - Budgets
</a></li><li class="dropdown-item"><!----> <a href="/fiscal-data-package--spending/" class="nav-link">
  Fiscal Data Package - Spending
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Other Specs" class="dropdown-title"><span class="title">Other Specs</span> <span class="arrow down"></span></button> <button type="button" aria-label="Other Specs" class="mobile-dropdown-title"><span class="title">Other Specs</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/data-package-identifier/" class="nav-link">
  Data Package Identifier
</a></li><li class="dropdown-item"><!----> <a href="/tabular-diff/" class="nav-link">
  Tabular Diff Format
</a></li><li class="dropdown-item"><!----> <a href="/csv-dialect/" class="nav-link">
  CSV Dialect
</a></li><li class="dropdown-item"><!----> <a href="/security/" class="nav-link">
  Security
</a></li><li class="dropdown-item"><!----> <a href="/profiles/" class="nav-link">
  Profiles
</a></li><li class="dropdown-item"><!----> <a href="/views/" class="nav-link">
  Views
</a></li></ul></div></div><div class="nav-item"><a href="/patterns/" class="nav-link">
  Patterns
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Guides" class="dropdown-title"><span class="title">Guides</span> <span class="arrow down"></span></button> <button type="button" aria-label="Guides" class="mobile-dropdown-title"><span class="title">Guides</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guides/data-package/" class="nav-link">
  Data Package
</a></li><li class="dropdown-item"><!----> <a href="/guides/implementation/" class="nav-link">
  Implementation
</a></li></ul></div></div><div class="nav-item"><a href="https://datapackage.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Data Package (v2)
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Fiscal Data Package</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fiscal-data-package/#language" class="sidebar-link">Language</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/fiscal-data-package/#changelog" class="sidebar-link">Changelog</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/fiscal-data-package/#introduction" class="sidebar-link">Introduction</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fiscal-data-package/#lessons-learned-from-v0-3-of-this-spec" class="sidebar-link">Lessons learned from v0.3 of this spec</a></li><li class="sidebar-sub-header"><a href="/fiscal-data-package/#what-s-different" class="sidebar-link">What's different?</a></li></ul></li><li><a href="/fiscal-data-package/#terminology" class="sidebar-link">Terminology</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fiscal-data-package/#what-is-fiscal-data" class="sidebar-link">What is Fiscal Data?</a></li><li class="sidebar-sub-header"><a href="/fiscal-data-package/#what-is-a-fiscal-data-file" class="sidebar-link">What is a Fiscal Data File?</a></li><li class="sidebar-sub-header"><a href="/fiscal-data-package/#what-is-the-fiscal-data-package" class="sidebar-link">What is the Fiscal Data Package?</a></li></ul></li><li><a href="/fiscal-data-package/#the-fiscal-data-package-descriptor" class="sidebar-link">The Fiscal Data Package Descriptor</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fiscal-data-package/#overview" class="sidebar-link">Overview</a></li><li class="sidebar-sub-header"><a href="/fiscal-data-package/#fiscal-modelling" class="sidebar-link">Fiscal Modelling</a></li><li class="sidebar-sub-header"><a href="/fiscal-data-package/#the-extrafields-property" class="sidebar-link">The extraFields property</a></li><li class="sidebar-sub-header"><a href="/fiscal-data-package/#denormalising-measures" class="sidebar-link">Denormalising Measures</a></li><li class="sidebar-sub-header"><a href="/fiscal-data-package/#constant-fields" class="sidebar-link">Constant Fields</a></li><li class="sidebar-sub-header"><a href="/fiscal-data-package/#columntypes" class="sidebar-link">ColumnTypes</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>This is a draft specification and still under development. If you have comments or suggestions please file them in the <a href="https://github.com/frictionlessdata/specs/issues" target="_blank" rel="noopener noreferrer">issue tracker<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. If you have explicit changes please fork the <a href="https://github.com/frictionlessdata/specs/issues" target="_blank" rel="noopener noreferrer">git repo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and submit a pull request.</p></div> <h1 id="page-frontmatter-title"><a href="#page-frontmatter-title" class="header-anchor">#</a> Fiscal Data Package</h1> <p>Fiscal Data Package is a lightweight and user-oriented format for publishing and consuming fiscal data. Fiscal data packages are made of simple and universal components. They can be produced from ordinary spreadsheet software and used in any environment.</p> <table class="frm-table"><tbody><tr><th> Author(s) </th> <td> Paul Walsh, Rufus Pollock, Tryggvi Björgvinsson, Steve Bennett, Adam Kariv, Dan Fowler </td></tr> <tr></tr><tr><th> Created </th> <td> 14 March 2014 </td></tr> <tr></tr><tr><th> Updated </th> <td> 22 April 2018 </td></tr> <tr><th> JSON Schema </th> <td><a href="/schemas/fiscal-data-package.json">fiscal-data-package.json </a></td></tr> <tr><th> Version </th> <td> 1.0-rc.1 </td></tr></tbody></table> <h2 id="language"><a href="#language" class="header-anchor">#</a> Language</h2> <p>
  The key words <code>MUST</code>, <code>MUST NOT</code>, <code>REQUIRED</code>, <code>SHALL</code>, <code>SHALL NOT</code>, <code>SHOULD</code>, <code>SHOULD NOT</code>, <code>RECOMMENDED</code>, <code>MAY</code>, and <code>OPTIONAL</code> in this document are to be interpreted as described in <a href="https://www.ietf.org/rfc/rfc2119.txt" target="_blank" title="RFC 2119">RFC 2119</a></p> <h2 id="changelog"><a href="#changelog" class="header-anchor">#</a> Changelog</h2> <ul><li><code>1.0.0rc1</code>: Updated distinction between spec and standard</li> <li><code>1.0.0rc</code>: A complete rewrite of the spec</li> <li><code>0.3.0</code>: incorporates all changes up to <code>0.3.0-alpha9</code></li> <li><code>0.3.0-alpha9</code>: (!) rename mapping to model. Remove ‘ocdid’ as recommended attribute for location dimension.</li> <li><code>0.3.0-alpha8</code>: remove transaction identifier</li> <li><code>0.3.0-alpha7</code>: remove quality level guidance</li> <li><code>0.3.0-alpha6</code>: dimension fields -&gt; attributes, revert measures/dimensions/attributes to objects, add <code>parent</code> and <code>labelfor</code> keys on dimension attributes</li> <li><code>0.3.0-alpha5</code>: variety of improvements and corrections including #35, #37 etc</li> <li><code>0.3.0-alpha4</code>: reintroduce a lot of the content of data recommendations from v0.2</li> <li><code>0.3.0-alpha3</code>: rework mapping structure in various ways</li> <li><code>0.3.0-alpha2</code>: rename Budget Data Package to Fiscal Data Package</li> <li><code>0.3.0-alpha</code>: very substantial rework of spec to use “mapping” approach between physical and logical model. Core framework, based on Tabular Data Package, is unchanged.</li> <li><a href="/fiscal-data-package/0.2/"><code>0.2.0</code></a>: large numbers of changes and clarifications for particular fields but no substantive change to the overall spec</li> <li><a href="/fiscal-data-package/0.1/"><code>0.1.0</code></a>: first complete version of the specification</li></ul> <p>[toc]</p> <h2 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h2> <p>This document contains the “Fiscal Data Package” specification - a lightweight and user-oriented format for publishing and consuming fiscal data.</p> <p>The motivation behind the fiscal data package was to create a specification which is <em>open by nature</em> - based on other open standards, supported by open tools and software, modular, extensible and promoted transparently by a large community.</p> <p>It is designed to be lightweight and simple to use - providing a small but flexible set of features, based on real-world requirements and not theoretical ones. All the while, the built-in extensibility allows this spec to adapt to  many different use cases and domains. It is also possible to gradually use more and more part of this specification - thus making it easier to implement this spec with existing data while slowly improving the data quality.</p> <p>A main concern of this specification is the ability to work with data <em>as it is currently exists</em>, without forcing publishers to modify the contents or structure of their current data files in order to “adapt” them to the specification.</p> <p>It concerns with how fiscal data should be packaged and providing means for publishers to best convey the meaning of the data - so it can be optimally used by consumers. This specification also provides details regarding file-formats, data-types, meta-data and structuring the data in files.</p> <p>On the other hand, this specification is, <em>by design</em>, non-opinionated about which data <em>should</em> be published by publishers - which data-sets, which fields and and the internal processes these reflect.</p> <p>Alongside this specification are two fiscal taxonomies which serve as standards for publishing <em>budget</em> files and <em>spending</em> files. These can be found here:</p> <ul><li><a href="/fiscal-data-package--budgets/">The Budget Fiscal Data Package Standard</a></li> <li><a href="/fiscal-data-package--spending/">The Spending Fiscal Data Package Standard</a></li></ul> <h3 id="lessons-learned-from-v0-3-of-this-spec"><a href="#lessons-learned-from-v0-3-of-this-spec" class="header-anchor">#</a> Lessons learned from v0.3 of this spec</h3> <p>Via a wide range of technical implementation, partner piloting, and fiscal data projects with other civic tech and data journalist partners, we’ve learned a lot about what works in Fiscal Data package v0.3, and what does not. We want to take these learnings and make a more robust and future proof v1.0 of the specification.</p> <h4 id="modelling"><a href="#modelling" class="header-anchor">#</a> Modelling</h4> <p>Version 0.3 of the spec contained an elaborate system for modelling of the fiscal data. In practice, this system turned out to be too complicated for normal users and error prone (as inconsistent modelling could be created).</p> <p>To add to that, modelling was not versatile enough to account for the very different source files existing with real users, nor was it expressive enough to convey the specific semantics required by these users.</p> <p>A few examples of this strictness includes:</p> <ul><li>The predefined set of classifications for dimensions. This hard-coded list did not capture the richness of fiscal data ‘in the wild’, as it contained too few and too broad options.</li> <li>Measure columns were assumed to be of a specific currency, disregarding datasets in which the currency is provided in a separate column (or non monetary measures).</li> <li>Measure columns were assumed to be of a specific budgeting phase (out of 4 options) and of a single direction (income/expenditure), ignoring data sets which have different phases, or that the phase or direction are provided in a separate column - or data sets which are not related to budgets altogether…</li></ul> <h4 id="file-structure"><a href="#file-structure" class="header-anchor">#</a> File structure</h4> <p>While machines will always prefer to read data files in their denormalised (or unpivoted) form - as it’s the most verbose and straightforward one - publishers will often choose a more compact, pivoted form. Other publishers would take out from the file some of the data, and append it as a separate code list file.</p> <p>Version 0.3 of the spec assumed data files would only be provided in a very specific pivoted form - which might apply to some cases, but practically failed on many other pivoting variations that were encountered.</p> <h3 id="what-s-different"><a href="#what-s-different" class="header-anchor">#</a> What’s different?</h3> <p>In a nutshell, the notable changes from v0.3 to v1 are as follows:</p> <ul><li>Consistent usage of “fiscal concepts” to model fiscal data (i.e. <em>ColumnTypes</em>), instead of the mix of metadata properties, measures and dimensions in v0.3 (all concepts are either a measure or a dimension)</li> <li>The representation of concepts on data resources, instead of on a distinct <code>model</code> property</li> <li>Improve implementation and semantics around direction and phase</li> <li>Have explicit recommendations on the desirable concepts for given types of fiscal data (budget, spend, etc.)</li> <li>Update to be based on Tabular Data Package v1</li></ul> <h2 id="terminology"><a href="#terminology" class="header-anchor">#</a> Terminology</h2> <h3 id="what-is-fiscal-data"><a href="#what-is-fiscal-data" class="header-anchor">#</a> What is Fiscal Data?</h3> <p>In the context of this specification, we will define a fiscal dataset, at its core, to be one providing information on a series of fiscal transactions.</p> <p>Each of these transactions consists of the following concepts:</p> <ul><li>The <em>source</em> of the transaction</li> <li>The <em>recipient</em> of the transaction</li> <li><em>When</em> the transaction occurred</li> <li>A single <em>amount</em> of money (or equivalent) that was transferred in the transaction</li> <li>Other properties describing the transaction</li></ul> <p>These concepts must appear in all fiscal data - there is no transaction without knowing who gave how much money, to whom and when. However, in some cases, the transactions are aggregated - either because the exact recipient is not known yet (which is usually the case when planning a budget) or because it’s preferable to present data aggregated over a period of time (usually a single fiscal year).</p> <p>In aggregated data sets, you would find only a subset of these concepts. For example, a planned budget file would aggregate transactions over a period of a fiscal year, indicating the source of the transaction and its amount but without specifying the exact recipients (which are still unknown at the time of planning).</p> <p>Properties describing the transaction could be:</p> <ul><li>Unique identifiers of the transaction</li> <li>Classifications of sorts, providing context for the source of the money or what is its purpose</li> <li>Details regarding the procurement or budgeting process related to the amount (e.g. allocated vs. executed budgeting phase)</li> <li>Information regarding the mechanism used to transfer the money</li> <li>Description of the amount itself - currency, multiplication factor</li></ul> <p>Other properties are naturally possible - all depending on the actual financial systems that are involved in the transaction.</p> <h4 id="example"><a href="#example" class="header-anchor">#</a> Example</h4> <p>We’ll demonstrate the theoretical concepts with a concrete example - the Smith Family Fiscal Data.</p> <p>On September 30th, the family gathered and decided on a budget for the upcoming week:</p> <table><thead><tr><th>Week</th> <th>ID</th> <th>Buyer</th> <th>Purpose</th> <th>Payment Method</th> <th>Planned Amount</th></tr></thead> <tbody><tr><td>1-7/Oct</td> <td>1</td> <td>George</td> <td>Food</td> <td>Credit Card</td> <td>$100</td></tr> <tr><td>1-7/Oct</td> <td>2</td> <td>George</td> <td>Books</td> <td>Paypal Account</td> <td>$15</td></tr> <tr><td>1-7/Oct</td> <td>3.1</td> <td>Lorraine</td> <td>Clothing</td> <td>Shop Gift Card</td> <td>$25</td></tr> <tr><td>1-7/Oct</td> <td>3.2</td> <td>Lorraine</td> <td>Clothing</td> <td>Credit Card</td> <td>$10</td></tr> <tr><td>1-7/Oct</td> <td>4</td> <td>Lorraine</td> <td>Fuel</td> <td>Credit Card</td> <td>$40</td></tr> <tr><td>1-7/Oct</td> <td>5</td> <td>Marty</td> <td>Candy</td> <td>Allowance - Cash</td> <td>$10</td></tr> <tr><td>1-7/Oct</td> <td>6</td> <td>George</td> <td>Taxes</td> <td>Credit Card</td> <td>$20</td></tr></tbody></table> <p>In this example we can see most of the concepts we’d often see in budget files:</p> <ul><li><em>Week</em> is the <em>Fiscal Period</em></li> <li><em>Buyer</em> serves as the <em>Administrative Classification</em></li> <li><em>Purpose</em> would be the <em>Functional Classification</em></li> <li><em>Payment Method</em> is the <em>Economic Classification</em></li> <li>and the <em>Amount</em> is, naturally, the budgeted amount.</li></ul> <p>This above data table is an example of an <em>aggregated data set</em>. We don’t see individual purchases, but rather a plan of the purchases over the week, summed according to purpose, buyer and purchase method.</p> <p>When the week ended, the family gathered once again and reviewed the actual spending that took place during that week:</p> <table><thead><tr><th>Date</th> <th>Budget ID</th> <th>Item</th> <th>Where</th> <th>Amount</th></tr></thead> <tbody><tr><td>1/2</td> <td>4</td> <td>30L Fuel</td> <td>Gas Station</td> <td>$15.5</td></tr> <tr><td>1/2</td> <td>6</td> <td>Housing Tax</td> <td>City Hall</td> <td>$20</td></tr> <tr><td>2/2</td> <td>3.1</td> <td>Shirts</td> <td>Mall</td> <td>$25</td></tr> <tr><td>2/2</td> <td>3.2</td> <td>Trousers</td> <td>Mall</td> <td>$3.8</td></tr> <tr><td>3/2</td> <td>1</td> <td>Groceries</td> <td>Market</td> <td>$107.60</td></tr> <tr><td>4/2</td> <td>4</td> <td>31L Fuel</td> <td>Gas Station</td> <td>$16.2</td></tr> <tr><td>6/2</td> <td>5</td> <td>Bubble Gum</td> <td>Candy Shop</td> <td>$8</td></tr> <tr><td>7/2</td> <td>4</td> <td>28L Fuel</td> <td>Gas Station</td> <td>$13.3</td></tr></tbody></table> <p>We can see that this data provides detailed information about the individual transactions that were made. In our example:</p> <ul><li><em>Where</em> would be the <em>Recipient</em> of the transaction, and</li> <li><em>Item</em> would be the <em>Purpose</em> of the transaction</li></ul> <p>Combined with the original budget (using the <em>ID</em> columns), we can know <em>Who</em> did each purchase, for what purpose and with which payment method.</p> <p>We can then aggregate the transactions and get an <em>Executed Budget</em> data set, which contains both the planned and executed figures for each aggregated row:</p> <table><thead><tr><th>Week</th> <th>ID</th> <th>Buyer</th> <th>Purpose</th> <th>Payment Method</th> <th>Planned</th> <th>Executed</th></tr></thead> <tbody><tr><td>1-7/Oct</td> <td>1</td> <td>George</td> <td>Food</td> <td>Credit Card</td> <td>$100</td> <td>$107.60</td></tr> <tr><td>1-7/Oct</td> <td>2</td> <td>George</td> <td>Books</td> <td>PayPal Account</td> <td>$15</td> <td>$0</td></tr> <tr><td>1-7/Oct</td> <td>3.1</td> <td>Lorraine</td> <td>Clothing</td> <td>Shop Gift Card</td> <td>$25</td> <td>$25</td></tr> <tr><td>1-7/Oct</td> <td>3.2</td> <td>Lorraine</td> <td>Clothing</td> <td>Credit Card</td> <td>$10</td> <td>$3.8</td></tr> <tr><td>1-7/Oct</td> <td>4</td> <td>Lorraine</td> <td>Fuel</td> <td>Credit Card</td> <td>$40</td> <td>$45</td></tr> <tr><td>1-7/Oct</td> <td>5</td> <td>Marty</td> <td>Candy</td> <td>Allowance - Cash</td> <td>$10</td> <td>$8</td></tr> <tr><td>1-7/Oct</td> <td>6</td> <td>George</td> <td>Taxes</td> <td>Credit Card</td> <td>$20</td> <td>$20</td></tr></tbody></table> <h3 id="what-is-a-fiscal-data-file"><a href="#what-is-a-fiscal-data-file" class="header-anchor">#</a> What is a Fiscal Data File?</h3> <p>In the context of this specification, a fiscal data file is a physical representation of fiscal data (as defined above), in a series of computer files.</p> <p>This representation might consist of a single, denormalised, data-table (with one row per transaction) - or take a more normalised form, spanning multiple, separate tables.</p> <p>Note: We use the terms ‘normalised’ and ‘denormalised’ in this document quite a bit, so it’s best to take a moment and understand what they mean. In short, a normalised form is a way of structuring data so that redundancy is minimised. A denormalised form has the simplest form but also the most redundant one. More on this can be found in this <a href="https://en.wikipedia.org/wiki/Database_normalization" target="_blank" rel="noopener noreferrer">Wikipedia Page<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>Table columns will hold some property (or properties) of the above concepts - some will hold amounts, some will hold information regarding the recipient etc. As the exact nature of each of these concepts varies greatly by context, the possibilities for properties appearing in a fiscal data file column are also great.</p> <p>A fiscal data file might contain all information necessary to reconstruct the fiscal data, or it might have some implicit information which is not part of the data. As an example, imagine the following scenarios:</p> <ul><li>A budget file named ‘2015_budget.csv’, not including the ‘year’ column as it’s already in the file name</li> <li>A budget file with no ‘year’ column, instead having ‘2017’, ‘2018’, and ‘2019’ columns.</li></ul> <p>In these two scenarios, we need to the file’s metadata and augment the actual data records contained in the file - in order to be able to correctly reconstruct the original data.</p> <p>As with any tabular data, a physical representation of data also includes selection of file formats, data formatting and locale specifics (which are out of scope for this specification and are handled in the Tabular Data Package specification).</p> <h4 id="example-2"><a href="#example-2" class="header-anchor">#</a> Example</h4> <p>Let’s imagine we asked Lorraine and George to email us their weekly family budget. Although working on the same data set, each took a very different approach as to how to represent the data in an actual data file.</p> <p>George, which is an accountant, sent us an CSV file named <code>week_of_1_7_oct.csv</code>. The CSV file contained these cells:</p> <table><thead><tr><th>Who?</th> <th>What for?</th> <th>How?</th> <th>Plan</th> <th>Actual</th></tr></thead> <tbody><tr><td>George</td> <td>Food</td> <td>Credit Card</td> <td>$100</td> <td>$107.60</td></tr> <tr><td>George</td> <td>Books</td> <td>Paypal Account</td> <td>$15</td> <td>$0</td></tr> <tr><td>Lorraine</td> <td>Clothing</td> <td>Shop Gift Card</td> <td>$25</td> <td>$25</td></tr> <tr><td>Lorraine</td> <td>Clothing</td> <td>Credit Card</td> <td>$10</td> <td>$3.8</td></tr> <tr><td>Lorraine</td> <td>Fuel</td> <td>Credit Card</td> <td>$40</td> <td>$45</td></tr> <tr><td>Marty</td> <td>Candy</td> <td>Allowance - Cash</td> <td>$10</td> <td>$8</td></tr> <tr><td>George</td> <td>Taxes</td> <td>Credit Card</td> <td>$20</td> <td>$20</td></tr></tbody></table> <p>Lorraine, a Data Scientist, took a different approach. In the email that she sent, there were attached 5 different CSV files:</p> <ul><li><code>Budget.csv</code>:</li></ul> <table><thead><tr><th>Week Start</th> <th>ID</th> <th>BuyerID</th> <th>PurposeID</th> <th>PaymentMethodID</th> <th>PhaseID</th> <th>Amount</th></tr></thead> <tbody><tr><td>2015-10-01</td> <td>1</td> <td>B1</td> <td>P1</td> <td>PM1</td> <td>P</td> <td>$100</td></tr> <tr><td>2015-10-01</td> <td>1</td> <td>B1</td> <td>P1</td> <td>PM1</td> <td>A</td> <td>$107.60</td></tr> <tr><td>2015-10-01</td> <td>2</td> <td>B1</td> <td>P2</td> <td>PM2</td> <td>P</td> <td>$15</td></tr> <tr><td>2015-10-01</td> <td>2</td> <td>B1</td> <td>P2</td> <td>PM2</td> <td>A</td> <td>$0</td></tr> <tr><td>2015-10-01</td> <td>3.1</td> <td>B2</td> <td>P3</td> <td>PM3</td> <td>P</td> <td>$25</td></tr> <tr><td>2015-10-01</td> <td>3.1</td> <td>B2</td> <td>P3</td> <td>PM3</td> <td>A</td> <td>$25</td></tr> <tr><td>2015-10-01</td> <td>3.2</td> <td>B2</td> <td>P3</td> <td>PM1</td> <td>P</td> <td>$10</td></tr> <tr><td>2015-10-01</td> <td>3.2</td> <td>B2</td> <td>P3</td> <td>PM1</td> <td>A</td> <td>$3.8</td></tr> <tr><td>2015-10-01</td> <td>4</td> <td>B2</td> <td>P4</td> <td>PM1</td> <td>P</td> <td>$40</td></tr> <tr><td>2015-10-01</td> <td>4</td> <td>B2</td> <td>P4</td> <td>PM1</td> <td>A</td> <td>$45</td></tr> <tr><td>2015-10-01</td> <td>5</td> <td>B3</td> <td>P5</td> <td>PM4</td> <td>P</td> <td>$10</td></tr> <tr><td>2015-10-01</td> <td>5</td> <td>B3</td> <td>P5</td> <td>PM4</td> <td>A</td> <td>$8</td></tr> <tr><td>2015-10-01</td> <td>6</td> <td>B1</td> <td>P6</td> <td>PM1</td> <td>P</td> <td>$20</td></tr> <tr><td>2015-10-01</td> <td>6</td> <td>B1</td> <td>P6</td> <td>PM1</td> <td>A</td> <td>$20</td></tr></tbody></table> <ul><li><code>Buyer.csv</code>:</li></ul> <table><thead><tr><th>BuyerID</th> <th>Buyer</th></tr></thead> <tbody><tr><td>B1</td> <td>George</td></tr> <tr><td>B2</td> <td>Lorraine</td></tr> <tr><td>B3</td> <td>Marty</td></tr></tbody></table> <ul><li><code>Purpose.csv</code></li></ul> <table><thead><tr><th>PurposeID</th> <th>Purpose</th></tr></thead> <tbody><tr><td>P1</td> <td>Food</td></tr> <tr><td>P2</td> <td>Books</td></tr> <tr><td>P3</td> <td>Clothing</td></tr> <tr><td>P4</td> <td>Fuel</td></tr> <tr><td>P5</td> <td>Candy</td></tr> <tr><td>P6</td> <td>Taxes</td></tr></tbody></table> <ul><li><code>PaymentMethod.csv</code>:</li></ul> <table><thead><tr><th>PaymentMethodID</th> <th>Payment Method</th></tr></thead> <tbody><tr><td>PM1</td> <td>Credit Card</td></tr> <tr><td>PM2</td> <td>PayPal Account</td></tr> <tr><td>PM3</td> <td>Shop Gift Card</td></tr> <tr><td>PM4</td> <td>Allowance - Cash</td></tr></tbody></table> <ul><li><code>Phase.csv</code></li></ul> <table><thead><tr><th>PhaseID</th> <th>Phase</th></tr></thead> <tbody><tr><td>P</td> <td>Planned</td></tr> <tr><td>A</td> <td>Actual</td></tr></tbody></table> <p><em><strong>How is Lorraine’s method different from Georges’?</strong></em></p> <ol><li>We can see that Lorraine’s method has far less data duplication - all field values are mapped to unique identifiers and the full names are detailed in separate, smaller tables.</li> <li>Another observation is that there is only one single amount column. The distinction between the two amount columns (<em>Planned</em> and <em>Actual</em>) was transformed into a new <em>Phase</em> column.</li> <li>Unlike George’s file, Lorraine has all the required information as part of the data - specifically, the time period has its own column and is not only mentioned in the name of the sheet</li> <li>Finally, Lorraine chose a more common way of presenting the date - using the ISO standard YYYY-MM-DD format.</li></ol> <h3 id="what-is-the-fiscal-data-package"><a href="#what-is-the-fiscal-data-package" class="header-anchor">#</a> What is the Fiscal Data Package?</h3> <p>A Fiscal Data Package is a means to <em>describe</em> an existing fiscal data file so that data can be consistently and accurately extracted into its logical representation, without the need for any external assumptions or preconditions.</p> <p>A rich taxonomy of fiscal concepts (<em>ColumnTypes</em>) allows these descriptors to provide some <em>meaning</em> to the resulting data. The different columns in the data are mapped into common, generic fiscal concepts which allow users of the data to understand it without having to understand the very specifics of the financial system that produced it. Furthermore, users are allowed to extend that taxonomy in a way that allows them to provide these context specific details while still keeping the mapping to a common concept.</p> <h4 id="example-1-george-s-file"><a href="#example-1-george-s-file" class="header-anchor">#</a> Example 1 - George’s file</h4> <p>We’ll go over the concepts of the Fiscal Data Package via a few examples.</p> <p>First, we shall model George’s file from the previous section.</p> <p>The Fiscal Data Package is an extension of a Tabular Data Package, so our output should be a valid <code>datapackage.json</code> file - the data package descriptor:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token punctuation">{</span>
  <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;smith-budget-by-george&quot;</span><span class="token punctuation">,</span>
  <span class="token key atrule">&quot;title&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Smith Family Budget (George's version)&quot;</span><span class="token punctuation">,</span>
</code></pre></div><p>We start by providing a little metadata for the entire dataset…</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code>  <span class="token key atrule">&quot;resources&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;budget&quot;</span><span class="token punctuation">,</span>
      <span class="token key atrule">&quot;path&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;week_of_1_7_oct.csv&quot;</span><span class="token punctuation">,</span>
</code></pre></div><p>And then some metadata on the resource itself.<br>
Now we describe the different columns in the file:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code>      <span class="token key atrule">&quot;schema&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token key atrule">&quot;fields&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Who?&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;columnType&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;administrative-classification:generic:code&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>The first column is the “Who?” column - the administrative classification in our example dataset. We state that the column is of a <em>string</em> type and we provide a proper <em>ColumnType</em> to state that this is an <em>Administrative Classification Code</em> (more on ColumnTypes later on).</p> <p>We now continue to model the rest of the fields:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code>          <span class="token punctuation">{</span>
            <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;What for?&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;columnType&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;functional-classification:generic:code&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;How?&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;columnType&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;economic-classification:generic:code&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>Finally we want to handle the amounts - also known as ‘measures’: ‘Plan’ and ‘Actual’. How do we represent correctly the difference between the two?</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code>          <span class="token punctuation">{</span>
            <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Plan&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;bareNumber&quot;</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;normalize&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
              <span class="token key atrule">&quot;Phase&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Plan&quot;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Actual&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;bareNumber&quot;</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;normalize&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
              <span class="token key atrule">&quot;Phase&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Actual&quot;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p>Although both planned and actual values appear in the same row, each one of them is, in fact, a separate data point. Conceptually, we could imagine a new table where each row is converted into two rows, for example</p> <table><thead><tr><th>George</th> <th>Food</th> <th>Credit Card</th> <th>$100</th> <th>$107.60</th></tr></thead> <tbody></tbody></table> <p>Would be converted to</p> <table><thead><tr><th>George</th> <th>Food</th> <th>Credit Card</th> <th>$100</th> <th>Plan</th></tr></thead> <tbody><tr><td>George</td> <td>Food</td> <td>Credit Card</td> <td>$107.60</td> <td>Actual</td></tr></tbody></table> <p>So that we’re left with just one “measure” and an extra “phase” column.</p> <p>The <code>normalize</code> attribute does exactly that - and it works together with the <code>extraField</code> property which declares all the columns which are not part of the physical source file:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code>        <span class="token key atrule">&quot;extraFields&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Amount&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;columnType&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;value&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;normalizationTarget&quot;</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>The first extra field is the normalisation target.<br>
Both amounts (from ‘Plan’ and ‘Actual’) will be placed here. Notice we gave this column the <code>value</code> ColumnType, denoting it as a value (or a <em>“Measure”</em>).</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code>          <span class="token punctuation">{</span>
            <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Phase&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;columnType&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;phase:id&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>The second extra field will hold the “phase” - based on the values in the <code>normalize</code> property in the table schema fields.<br>
When denormalising, these two extra fields should replace the existing ‘Plan’ and ‘Actual’ columns.</p> <p>Finally, we want to move the “fiscal period” from the filename to a proper column in the data itself. We do that by declaring a “constant” field. While we’re at it we also add a proper currency column - just in case the Smith’s decide one day to open an offshore bank account.</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code>          <span class="token punctuation">{</span>
            <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Week Start&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;date&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;columnType&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;date:fiscal:activity-start&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;constant&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;1/10/2015&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;format&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;%d/%m/%Y&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Currency&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;columnType&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;value-currency:code&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;constant&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;USD&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span>      
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="example-2-lorraine-s-file"><a href="#example-2-lorraine-s-file" class="header-anchor">#</a> Example 2 - Lorraine’s file</h4> <p>Let’s model Lorraine’s file now.</p> <p>We’ll start with the same metadata:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token punctuation">{</span>
  <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;smith-budget-by-lorraine&quot;</span><span class="token punctuation">,</span>
  <span class="token key atrule">&quot;title&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Smith Family Budget (Lorraine's version)&quot;</span><span class="token punctuation">,</span>
</code></pre></div><p>And then we start describing the different resources - in Lorraine’s case, we’ve got 5 of them.<br>
The first one is the “buyer” table:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code>  <span class="token key atrule">&quot;resources&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;buyer&quot;</span><span class="token punctuation">,</span>
      <span class="token key atrule">&quot;path&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Buyer.csv&quot;</span><span class="token punctuation">,</span>
      <span class="token key atrule">&quot;schema&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token key atrule">&quot;fields&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;BuyerID&quot;</span><span class="token punctuation">,</span> 
            <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Buyer&quot;</span><span class="token punctuation">,</span> 
            <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;columnType&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;administrative-classification:generic:code&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>This resource is pretty simple - we have only two columns, one of which is an identifier and the other is the actual buyer - which we mapped to a proper fiscal concept (<em>Administrative Classification</em>).</p> <p>Let’s map a few more resources - these are pretty much the same:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code>    <span class="token punctuation">{</span>
      <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;purpose&quot;</span><span class="token punctuation">,</span>
      <span class="token key atrule">&quot;path&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Purpose.csv&quot;</span><span class="token punctuation">,</span>
      <span class="token key atrule">&quot;schema&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token key atrule">&quot;fields&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;PurposeID&quot;</span><span class="token punctuation">,</span> 
            <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Purpose&quot;</span><span class="token punctuation">,</span> 
            <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;columnType&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;functional-classification:generic:code&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;payment_method&quot;</span><span class="token punctuation">,</span>
      <span class="token key atrule">&quot;path&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;PaymentMethod.csv&quot;</span><span class="token punctuation">,</span>
      <span class="token key atrule">&quot;schema&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token key atrule">&quot;fields&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;PaymentMethodID&quot;</span><span class="token punctuation">,</span> 
            <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Payment Method&quot;</span><span class="token punctuation">,</span> 
            <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;columnType&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;economic-classification:generic:code&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;phase&quot;</span><span class="token punctuation">,</span>
      <span class="token key atrule">&quot;path&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Phase.csv&quot;</span><span class="token punctuation">,</span>
      <span class="token key atrule">&quot;schema&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token key atrule">&quot;fields&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;PhaseID&quot;</span><span class="token punctuation">,</span> 
            <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Phase&quot;</span><span class="token punctuation">,</span> 
            <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;columnType&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;phase:id&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>Finally we tie all of these resources together into the main table (also known as the “facts table” - the “fact” in our case being a single transaction or budget item):</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code>    <span class="token punctuation">{</span>
      <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;budget&quot;</span><span class="token punctuation">,</span>
      <span class="token key atrule">&quot;path&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Budget.csv&quot;</span><span class="token punctuation">,</span>
      <span class="token key atrule">&quot;schema&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token key atrule">&quot;fields&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Week Start&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;date&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;columnType&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;date:fiscal:activity-start&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;format&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;%Y-%m-%d&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;ID&quot;</span><span class="token punctuation">,</span> 
            <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;columnType&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;budget-line-id&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;BuyerId&quot;</span><span class="token punctuation">,</span> 
            <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;PurposeID&quot;</span><span class="token punctuation">,</span> 
            <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;PaymentMethodID&quot;</span><span class="token punctuation">,</span> 
            <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;PhaseID&quot;</span><span class="token punctuation">,</span> 
            <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Amount&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;bareNumber&quot;</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;columnType&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;value&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p>Now, let’s use the magic of <a href="/table-schema/#foreign-keys">foreign keys</a> to connect the main table to all the secondary tables:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code>        <span class="token key atrule">&quot;foreignKeys&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token key atrule">&quot;fields&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;BuyerID&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;reference&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
              <span class="token key atrule">&quot;resource&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;buyer&quot;</span><span class="token punctuation">,</span>
              <span class="token key atrule">&quot;fields&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;BuyerID&quot;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token key atrule">&quot;fields&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;PurposeID&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;reference&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
              <span class="token key atrule">&quot;resource&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;purpose&quot;</span><span class="token punctuation">,</span>
              <span class="token key atrule">&quot;fields&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;PurposeID&quot;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token key atrule">&quot;fields&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;PaymentMethodID&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;reference&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
              <span class="token key atrule">&quot;resource&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;payment_method&quot;</span><span class="token punctuation">,</span>
              <span class="token key atrule">&quot;fields&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;PaymentMethodID&quot;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token key atrule">&quot;fields&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;PhaseID&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;reference&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
              <span class="token key atrule">&quot;resource&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;phase&quot;</span><span class="token punctuation">,</span>
              <span class="token key atrule">&quot;fields&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;PhaseID&quot;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p>Finally, all is left is to add the currency column (as in George’s file) and to wrap up.</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code>        <span class="token key atrule">&quot;extraFields&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Currency&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;columnType&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;value-currency:code&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;constant&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;USD&quot;</span>
           <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="the-fiscal-data-package-descriptor"><a href="#the-fiscal-data-package-descriptor" class="header-anchor">#</a> The Fiscal Data Package Descriptor</h2> <h3 id="overview"><a href="#overview" class="header-anchor">#</a> Overview</h3> <p>The Fiscal Data Descriptor is a fully-compatible extension of the Tabular Data Package specification (i.e., any fiscal data package should be fully readable by any tabular data package compatible software).</p> <p>The purpose of this extension is to provide a domain specific modelling of a fiscal dataset.</p> <p>There are quite a few motivations for such modelling:</p> <ul><li>Allowing fiscal data consumers to better understand the actual fiscal concept each column in the data set refers to</li> <li>Provide means to re-structure the data in a predictable form: normalised, denormalised or other</li> <li>Enabling smart and contextual comparisons of different datasets from different sources</li></ul> <p>However, <strong>by design</strong>, all parts of this extension are optional. In other words, the extent of modelling provided by the publisher of a fiscal data package is fully flexible and could range from the simple case of a tabular data package (with no modelling) - all through to a fully modelled dataset.</p> <p>It is left to the implementors to place any restrictions, if any, on the minimal level of modelling that they require or on how to treat missing parts of the model (e.g. ignore, infer etc.)</p> <h3 id="fiscal-modelling"><a href="#fiscal-modelling" class="header-anchor">#</a> Fiscal Modelling</h3> <p>This specification allows modelling of fiscal data in two distinct levels: the structural level and the semantic level.</p> <p><strong>Structural Level</strong></p> <p>We want to properly describe the structure of a dataset - so that data consumers are able to restructure the dataset based on their own needs and requirements.</p> <p>The method for describing a dataset’s structure is to detail the difference between the provided form a dataset to its fully denormalised form. Essentially we’re listing a set of transformations, that when applied, would convert the dataset from the former to the latter.</p> <p>Using the knowledge of how the denormalised data looks like, consumers can then better understand how to read, store or otherwise manipulate the data so it fits their existing systems and processes.</p> <p>A denormalised presentation of a data set needs to fulfill these conditions:</p> <ul><li>all data is contained in a single data table</li> <li>each row contains just one single data point with a single value</li> <li>all data and metadata is provided within the data table</li></ul> <p>The specification provides 3 possible transformations that might be used to describe how the dataset could be denormalised:</p> <ol><li><em>Foreign Keys</em> - connect separate data tables via an ID column present in both tables. This method is already part of the Tabular Data Package specification and will not be covered here.</li> <li><em>Denormalising Measures</em> - convert a row with multiple measures in the source data into multiple rows, each with a single value.</li> <li><em>Constant Fields</em> - represent metadata as constant columns in the data table</li></ol> <p><strong>Semantic Mapping</strong></p> <p>Semantic mapping is the process of assigning meaning to the data. Basically we want to map each column in the dataset to a “real-world” fiscal concept, so that data consumers have better understanding of the data itself - and the data might be compared to other datasets (which share a semantic similarity).</p> <p>This specification provides means for mapping each column in the original data (or its denormalised form) onto a fiscal concept, using a taxonomy of <em>ColumnTypes</em> which cover a wide range of real-world fiscal concepts (and can be easily extended to cover custom cases).</p> <h3 id="the-extrafields-property"><a href="#the-extrafields-property" class="header-anchor">#</a> The <code>extraFields</code> property</h3> <p>The main vehicle for the structural modelling is the <code>extraFields</code> property -  a property added to a tabular resource schema (as a sibling to the <code>fields</code> property), similarly containing field definitions.</p> <p>All the fields that are listed in the <code>extraFields</code> property are ones that appear in the denormalised form but not on the original data. The contents of these columns is derived from the dataset itself (or from the descriptor). Each of these fields there also specifies how their content relates to the original dataset.</p> <h3 id="denormalising-measures"><a href="#denormalising-measures" class="header-anchor">#</a> Denormalising Measures</h3> <p>In many cases, publishers will prefer to have Approved, Modified and Executed values of a budget as separate columns, instead of duplicating the same line just to provide 3 figures. It is more readable to humans and more concise (i.e. creates a smaller file size).</p> <p>In other cases, the budget figures for the current, next and after next years will appear as separate columns instead of in separate rows. This allows readers to more easily compare the budget figures across consecutive years.</p> <p>In fact, we might even encounter data-set where both phase and year columns were reduced in the same way.</p> <p>This practice is very common as a simple form of normalisation being done on a published dataset. However, some data is lost along the way - in our examples, we’ve lost the ‘Budget Phase’ column in the former, and ‘Fiscal Year’ column in the latter.</p> <p>We want to describe this process to allow data consumers to potentially undo it - and to the least resurrect the data that was lost in the process.</p> <p>In order to do so we need to:</p> <ul><li>Add to the <code>extraFields</code> property a field definition for each column that was reduced (budget phase or fiscal year in our scenario), for example:</li></ul> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">&quot;extraFields&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
   <span class="token punctuation">{</span> <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Budget Phase&quot;</span><span class="token punctuation">,</span> <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token punctuation">{</span> <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Fiscal Year&quot;</span><span class="token punctuation">,</span> <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;integer&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token punctuation">...</span>
<span class="token punctuation">]</span>
</code></pre></div><ul><li>We add a <code>normalize</code> property to <em>each</em> measure in the schema. The value of this property is a mapping between <em>every</em> ‘reduced column’ name to a value, for example:</li></ul> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token punctuation">...</span>
<span class="token key atrule">&quot;schema&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token key atrule">&quot;fields&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
     <span class="token punctuation">...</span>
   <span class="token punctuation">{</span> 
      <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Approved 2015&quot;</span><span class="token punctuation">,</span> 
      <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">,</span> 
      <span class="token key atrule">&quot;normalize&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token key atrule">&quot;Budget Phase&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;approved&quot;</span><span class="token punctuation">,</span>
          <span class="token key atrule">&quot;Fiscal Year&quot;</span><span class="token punctuation">:</span> <span class="token number">2015</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">...</span> 
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token punctuation">{</span> 
      <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Executed 2015&quot;</span><span class="token punctuation">,</span> 
      <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">,</span> 
      <span class="token key atrule">&quot;normalize&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token key atrule">&quot;Budget Phase&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;executed&quot;</span><span class="token punctuation">,</span>
          <span class="token key atrule">&quot;Fiscal Year&quot;</span><span class="token punctuation">:</span> <span class="token number">2015</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">...</span> 
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token punctuation">{</span> 
      <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Approved 2016&quot;</span><span class="token punctuation">,</span> 
      <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">,</span> 
      <span class="token key atrule">&quot;normalize&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token key atrule">&quot;Budget Phase&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;approved&quot;</span><span class="token punctuation">,</span>
          <span class="token key atrule">&quot;Fiscal Year&quot;</span><span class="token punctuation">:</span> <span class="token number">2016</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">...</span> 
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token punctuation">{</span> 
      <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Executed 2016&quot;</span><span class="token punctuation">,</span> 
      <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">,</span> 
      <span class="token key atrule">&quot;normalize&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token key atrule">&quot;Budget Phase&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;executed&quot;</span><span class="token punctuation">,</span>
          <span class="token key atrule">&quot;Fiscal Year&quot;</span><span class="token punctuation">:</span> <span class="token number">2016</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">...</span> 
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token punctuation">]</span>  
<span class="token punctuation">}</span>
<span class="token punctuation">...</span>
</code></pre></div><ul><li>Finally we add to the <code>extraFields</code> property a field definition for the target column for the measures’ values, like so:</li></ul> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">&quot;extraFields&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">...</span>
  <span class="token punctuation">{</span>
    <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Fiscal Amount&quot;</span><span class="token punctuation">,</span>
    <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">,</span>
    <span class="token key atrule">&quot;columnType&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;value&quot;</span><span class="token punctuation">,</span>
    <span class="token key atrule">&quot;normalizationTarget&quot;</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="constant-fields"><a href="#constant-fields" class="header-anchor">#</a> Constant Fields</h3> <p>In order to complement missing information in the dataset it’s possible to add columns with ‘constant’ values to the schema.</p> <p>We can do so by adding field definitions to the <code>extraFields</code> property. Each of these field objects must also contain a <code>constant</code> property, holding the constant value.</p> <p>Provided value might be provided either in its logical representation or its physical representation.</p> <p>Examples:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">&quot;extraFields&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">...</span>
  <span class="token punctuation">{</span>
    <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;A String&quot;</span><span class="token punctuation">,</span>
    <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token key atrule">&quot;constant&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;a value&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;A Number&quot;</span><span class="token punctuation">,</span>
    <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">,</span>
    <span class="token key atrule">&quot;constant&quot;</span><span class="token punctuation">:</span> <span class="token number">5</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Another Number&quot;</span><span class="token punctuation">,</span>
    <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">,</span>
    <span class="token key atrule">&quot;constant&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;5,4&quot;</span><span class="token punctuation">,</span>
    <span class="token key atrule">&quot;decimalChar&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;,&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;A Date&quot;</span><span class="token punctuation">,</span>
    <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;date&quot;</span><span class="token punctuation">,</span>
    <span class="token key atrule">&quot;constant&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;10/1/2015&quot;</span><span class="token punctuation">,</span>
    <span class="token key atrule">&quot;format&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;%m/%d/%Y&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;An Array&quot;</span><span class="token punctuation">,</span>
    <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;array&quot;</span><span class="token punctuation">,</span>
    <span class="token key atrule">&quot;constant&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;[3.14, 2.78]&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Last Example&quot;</span><span class="token punctuation">,</span>
    <span class="token key atrule">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;array&quot;</span><span class="token punctuation">,</span>
    <span class="token key atrule">&quot;constant&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">3.14</span><span class="token punctuation">,</span> <span class="token number">2.78</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="columntypes"><a href="#columntypes" class="header-anchor">#</a> ColumnTypes</h3> <p>The <em>ColumnType</em> taxonomy provides many common properties of fiscal concepts which appear as columns in many different fiscal data files.</p> <p>When describing a fiscal data file, each column in a fiscal data file must be mapped to a single <em>ColumnType</em> (Unmapped columns should simply be ignored).</p> <p>By inspecting the different <em>ColumnTypes</em> of the different columns in a file, one might get a good understanding of the meaning of each column and how different columns relate to one another.</p> <h4 id="columntype-hierarchy-tree"><a href="#columntype-hierarchy-tree" class="header-anchor">#</a> ColumnType Hierarchy Tree</h4> <p><em>ColumnTypes</em> are hierarchic: starting from very generic concepts at the root of the taxonomy (time, source, recipient, amount etc.), down to more and more specific concepts (via inheritance) - each one specialising its parent concept with a more fine-grained meaning.</p> <p>The names of the <em>ColumnTypes</em> represent that hierarchy. Each new level of the hierarchy is appended to the <em>ColumnType</em> name, separated by colons.</p> <p>For example, the <code>activity:generic:project:code</code> <em>ColumnType</em> is a non-specific project code. It’s part of the “activity” fiscal concept (i.e. which activity is funded), describes a “project” (which is one kind of activity - others might be “program” or “contract”) and specifically targets the unique project code (and not its name, description or other property).</p> <h4 id="columntype-basic-properties"><a href="#columntype-basic-properties" class="header-anchor">#</a> ColumnType Basic Properties</h4> <p>Each <em>ColumnType</em> in the taxonomy can also have the following properties:</p> <ul><li><code>dataType</code>: a <code>tableschema</code> type.<br>
This property states that columns with this <em>ColumnType</em> must also have this data type. For example, the <code>date:fiscal-year</code> column type (denoting a Fiscal Year) must always be mapped to a column with the <code>integer</code> data type.</li> <li><code>unique</code>: boolean (default: false)<br>
Mapping a column to a <em>ColumnType</em> which has <code>unique</code> set to true, means that this column should be considered as part of the “primary key” of the table.<br>
For example, the <code>transaction-id</code> <em>ColumnType</em> has the <code>unique</code> property set.</li> <li><code>labelOf</code>: a <code>unique</code> <em>ColumnType</em> name<br>
When a column contains labels for another column (usually containing codes), we will indicate this relationship using the <code>labelOf</code> property. This tells readers of the file that the “label” column contains display-names for the values of the “code” column.</li></ul> <p>Now for a few examples. We start with the <em>type definition</em> of the fiscal year concept from above - a column of the <code>date:fiscal-year</code> <em>ColumnType</em> must have an <code>integer</code> type and be part of the primary key of the schema:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;date:fiscal-year&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;dataType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;integer&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;unique&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Similarly, this is the definition for a generic country code, the <code>geo:address:country:code</code> <em>ColumnType</em>:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;geo:address:country:code&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;dataType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;unique&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The main difference here is the data type - country codes are <code>string</code>s.</p> <p>If we have in our dataset not only the country code but also the name of the country, we might consider using the <code>geo:address:country:label</code> <em>ColumnType</em>:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;geo:address:country:label&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;dataType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;labelOf&quot;</span><span class="token operator">:</span> <span class="token string">&quot;geo:address:country:code&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Notice how this <em>ColumnType</em> declares that it’s the label of another type (<code>geo:address:country:code</code>). It’s also not marked as unique, so it should not be a part of the schema’s primary field.</p> <p>The <code>labelOf</code> relationship might be used by implementors to choose which columns should be used for filtering a data set (usually the “codes”) and which columns should be used for the filtering options that will be shown to users (usually the “labels”).</p> <p>Note: while not strictly enforced, mapping columns to “label” <em>ColumnTypes</em> without their “code” counterparts should be avoided.</p> <h4 id="composite-column-types"><a href="#composite-column-types" class="header-anchor">#</a> Composite Column Types</h4> <p><em>ColumnTypes</em> can be composite - for example, an <code>address</code> <em>ColumnType</em> can be inherited by the <code>address:city</code>, <code>address:street</code> and <code>address:street-number</code> <em>ColumnTypes</em>. All of these, together, compose an <em>address</em>.</p> <p>Composite <em>ColumnTypes</em> might also have an inherent order - for example, a multi-level classification of a budget line. In this case, the <em>ColumnTypes</em> for the 1st and 2nd levels of that classification will both inherit from the classification’s <em>ColumnType</em>, and the 2nd level <em>ColumnType</em> will contain a <code>prior</code> property, pointing to the 1st level <em>ColumnType</em>.</p> <p>As an example, consider the non-specific administrative classification <em>ColumnType</em>, <code>administrative-classification:generic</code>. In most cases, this classification is multi-leveled, e.g. the first level might indicate a ministry, the second a department in that ministry and so on.</p> <p>Therefore, columns describing the first level of that classification should be mapped to <em>ColumnTypes</em> inheriting from <code>administrative-classification:generic:level1</code>. The column containing the code of the ministry (in our example) would be mapped to <code>administrative-classification:generic:level1:code</code>, while the name of the ministry would be mapped to <code>administrative-classification:generic:level1:label</code>.</p> <p>Same goes for the department code and name columns, which would be mapped to the <code>administrative-classification:generic:level2:code</code> and <code>administrative-classification:generic:level2:label</code> <em>ColumnTypes</em> respectively.</p> <p>To indicate the connection between these two levels, we would add a <code>prior</code> property to the <code>administrative-classification:generic:level2:code</code> type, with a value of <code>administrative-classification:generic:level1:code</code>.</p> <p>Then, when fetching the unique identifier for the administrative classification for a specific row, we would simply collect all values from columns with <em>ColumnTypes</em> inheriting from <code>administrative-classification</code> having <code>unique=true</code>, ordered using the values of the <code>prior</code> property.</p> <p>It is not required to map columns to all levels of a composite <em>ColumnType</em>. For example, consider a Geographic Classification system: Country &gt; State &gt; Region &gt; County &gt; City. It’s possible to map column just to the Country and City levels of the classification. Order is still maintained and missing levels are simply ignored.</p> <p>As an example for using the <code>prior</code> property, let’s consider this <em>phone number</em> example:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;recipient:phone-number:country-code&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;dataType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;recipient:phone-number:national-prefix&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;dataType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;prior&quot;</span><span class="token operator">:</span> <span class="token string">&quot;recipient:phone-number:country-code&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;recipient:phone-number:number&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;dataType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;prior&quot;</span><span class="token operator">:</span> <span class="token string">&quot;recipient:phone-number:national-prefix&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;recipient:phone-number:extension&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;dataType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;prior&quot;</span><span class="token operator">:</span> <span class="token string">&quot;recipient:phone-number:number&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><p>The <code>recipient:phone-number</code> concept is composed out of 4 parts: <code>country-code</code>, <code>national-prefix</code>, <code>number</code> and <code>extension</code>.</p> <p>When displaying the phone number, we use the <code>prior</code> relationship to define exactly in which order to show them - so that <code>number</code> never appears before <code>country-code</code>.</p> <p>We also don’t need to have all these concepts present in a data-set to be able to set the order between them - for example, we might have a file without a <code>country-code</code> (as all numbers are local), without a <code>national-prefix</code> (because <code>number</code> already contains that) or without an <code>extension</code>. In any of these cases we are still able to make out the correct order of the remaining concepts.</p> <h4 id="custom-columntypes"><a href="#custom-columntypes" class="header-anchor">#</a> Custom ColumnTypes</h4> <h5 id="implicit-typing"><a href="#implicit-typing" class="header-anchor">#</a> Implicit typing</h5> <p>Custom <em>ColumnTypes</em> can be used without declaring them in advance.</p> <p>The properties of each <em>ColumnType</em> are implicitly derived from other <em>ColumnTypes</em> based on their name.</p> <p>For example, recall the <code>geo:address:country:label</code> <em>ColumnType</em>:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;geo:address:country:label&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;dataType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;labelOf&quot;</span><span class="token operator">:</span> <span class="token string">&quot;geo:address:country:code&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Let’s assume that we have a dataset with country names in English, and another in our local language. To indicate the difference between these columns, we could map the first to the standard <code>geo:address:country:label</code> <em>ColumnType</em>, and the second to a custom <code>geo:address:country:label:localized</code>.</p> <p>While the former is a predefined <em>ColumnType</em> and part of this spec, the latter is not. However, its properties can be deduced - simply by finding an existing <em>ColumnType</em> whose name is a prefix to its own, and copying its properties.</p> <p>Therefore, implementations encountering unknown <em>ColumnTypes</em> should try and deduce their properties by finding another <em>ColumnType</em> whose name is a prefix to the unknown type’s name - and copying its properties.  If more than one such <em>ColumnType</em> exists, properties should be copied from all of them - with precedence on duplicate property names to be given to the longer prefix.</p> <p>If such an existing type is not found, then the <em>ColumnType</em> is still valid - except it won’t have any restrictions on data types, won’t have relationships with the other columns and won’t be part of the schema’s primary key.</p> <h5 id="explicit-typing"><a href="#explicit-typing" class="header-anchor">#</a> Explicit typing</h5> <p>In many cases there might be a need to explicitly define one or more types.<br>
It might be because we’re missing a specific type (which has some specific properties or a relationships to another existing type). It might also be because we want to provide a full taxonomy, better fitting the specific domain which our dataset belongs to.</p> <p>In these cases, we would attach to the fiscal data package descriptor a “<em>ColumnType</em> definition package”. This package contains definitions for any <em>ColumnType</em> that is required to model the data.</p> <p>The format of the <em>ColumnType</em> definition package is quite simple - a JSON array, containing <em>ColumnType</em> definitions as its items, for example:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment"># From https://www.car-makers-association.org/taxonomy/v1.3/columnTypes.json</span>
<span class="token punctuation">[</span> 
  <span class="token punctuation">{</span>
    <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;car:model&quot;</span><span class="token punctuation">,</span>
    <span class="token key atrule">&quot;dataType&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;date:manufacture-year&quot;</span><span class="token punctuation">,</span>
    <span class="token key atrule">&quot;dataType&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;integer&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><p>When attached to the fiscal data package descriptor, it can be either attached inline, or as a URL, pointing to a JSON file containing the package.</p> <p>The top-level <code>columnTypes</code> property of the fiscal data package descriptor holds one or more <em>ColumnType</em> definitions or definition packages. It is an array of items, which are interpreted like so:</p> <ul><li>If the array item is an object, it is interpreted as a single <em>ColumnType</em> definition.</li> <li>If the array item is an array, it is interpreted as a <em>ColumnType</em> definition package.</li> <li>If the array item is a string, it is interpreted as a URL for a <em>ColumnType</em> definition package.</li></ul> <p>As an example, let’s consider the following dataset containing sales figures for a used car agency:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token punctuation">{</span>
  <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;biffs-used-car-agency-2017-q1&quot;</span><span class="token punctuation">,</span>
  <span class="token key atrule">&quot;resources&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">#</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p>So far it’s quite straightforward (we omit the resources section for brevity).</p> <p>Now we define the <em>ColumnTypes</em> that are being used in this specification.</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code>  <span class="token key atrule">&quot;columnTypes&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;https://specs.frictionlessdata.io/taxonomies/fiscal/budgets.json&quot;</span><span class="token punctuation">,</span>
</code></pre></div><p>We start by specifying that we’ll be using the budget taxonomy <em>ColumnTypes</em>, as described <a href="/fiscal-data-package/fiscal-data-package--budgets.html">here</a>.</p> <p>This is also the default value for this property (in case its omitted in the spec).</p> <p>We continue by including another taxonomy, from the made-up car makers association (which we saw above). This taxonomy is also added as URL, pointing to version 1.3 of that taxonomy.</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code>    &quot;https<span class="token punctuation">:</span>//www.car<span class="token punctuation">-</span>makers<span class="token punctuation">-</span>association.org/taxonomy/v1.3/columnTypes.json&quot;<span class="token punctuation">,</span>
</code></pre></div><p>Now we shall add a package inline - with a few car-sale related types:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code>    <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;salesperson:employee-id&quot;</span><span class="token punctuation">,</span>
        <span class="token key atrule">&quot;dataType&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;integer&quot;</span><span class="token punctuation">,</span>
        <span class="token key atrule">&quot;unique&quot;</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;salesperson:employee-fullname&quot;</span><span class="token punctuation">,</span>
        <span class="token key atrule">&quot;dataType&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token key atrule">&quot;labelOf&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;salesperson:employee-id&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;owner:previous:name&quot;</span><span class="token punctuation">,</span>
        <span class="token key atrule">&quot;dataType&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;owner:new:name&quot;</span><span class="token punctuation">,</span>
        <span class="token key atrule">&quot;dataType&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p>Finally, we can also add a single type as well:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code>    <span class="token punctuation">{</span>
        <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;owner:previous:is-scientist&quot;</span><span class="token punctuation">,</span>
        <span class="token key atrule">&quot;dataType&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;boolean&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>


</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/frictionlessdata/specs/edit/master/fiscal-data-package/README.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/28/2020, 10:00:53 AM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.cdcba9d5.js" defer></script><script src="/assets/js/2.68c57eec.js" defer></script><script src="/assets/js/5.97b64592.js" defer></script><script src="/assets/js/21.a2d11985.js" defer></script><script src="/assets/js/10.b5019115.js" defer></script><script src="/assets/js/3.edca0309.js" defer></script>
  </body>
</html>
